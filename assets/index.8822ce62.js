var C=Object.defineProperty,E=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var w=(e,t,a)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,p=(e,t)=>{for(var a in t||(t={}))A.call(t,a)&&w(e,a,t[a]);if(g)for(var a of g(t))V.call(t,a)&&w(e,a,t[a]);return e},y=(e,t)=>E(e,I(t));import{o,c as d,a as r,F as _,r as m,b as h,p as W,d as F,t as i,m as D,e as b,f as S,n as T,w as k,v as L,g as M,h as O,i as B,j,k as q,l as U,q as $}from"./vendor.26f0f37e.js";const z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const s of c)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function a(c){const s={};return c.integrity&&(s.integrity=c.integrity),c.referrerpolicy&&(s.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?s.credentials="include":c.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(c){if(c.ep)return;c.ep=!0;const s=a(c);fetch(c.href,s)}};z();function N(e){return Math.round(Number(e)-273.15)}function G(e){return Math.round(e*3.6*10)/10}function H(e){return`http://openweathermap.org/img/w/${e}.png`}function K(e){var t=Math.floor(e/22.5+.5),a=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];return a[t%16]}var v=(e,t)=>{const a=e.__vccOpts||e;for(const[l,c]of t)a[l]=c;return a};const J={name:"Forecast",props:{placeForecast:Array},methods:{calcTemp:N}},Q=e=>(W("data-v-38fbbfdc"),e=e(),F(),e),R={class:"forecast"},X=h(" \xA0 5 day forecast "),Y=Q(()=>r("hr",null,null,-1)),Z={key:"day.dt"},ee={key:"day.dt"},te={key:"day.dt"};function ae(e,t,a,l,c,s){return o(),d("div",R,[X,Y,r("table",null,[r("tr",null,[(o(!0),d(_,null,m(a.placeForecast,n=>(o(),d("th",Z,i(n.day),1))),128))]),r("tr",null,[(o(!0),d(_,null,m(a.placeForecast,n=>(o(),d("td",ee,i(s.calcTemp(n.main.temp)),1))),128))]),r("tr",null,[(o(!0),d(_,null,m(a.placeForecast,n=>(o(),d("td",te,i(n.weather[0].main),1))),128))])])])}var ce=v(J,[["render",ae],["__scopeId","data-v-38fbbfdc"]]);const se={name:"PlaceCard",props:{placeWeather:{type:Object,default:{name:""}}},components:{Forecast:ce},data(){return{showForecast:!1}},methods:y(p(p({},D(["deletePlace"])),b(["fetchForecast"])),{calcTemp:N,calcWindSpeed:G,getIconUrl:H,calcWindDirection:K,toggleShowForecast(){this.placeWeather.forecast||this.fetchForecast(this.placeWeather.name).catch(e=>console.log(e)),this.showForecast=!this.showForecast}})},f=e=>(W("data-v-b2cb6284"),e=e(),F(),e),re={class:"card"},ne={class:"header-left"},le={class:"header-right"},oe=["src"],ie=f(()=>r("div",{style:{clear:"both"}},null,-1)),de={class:"weather-main"},ue={class:"main-temp"},he={class:"main-right"},pe=f(()=>r("br",null,null,-1)),fe=f(()=>r("br",null,null,-1)),_e=f(()=>r("br",null,null,-1)),me=f(()=>r("div",{style:{clear:"both"}},null,-1));function ye(e,t,a,l,c,s){const n=S("forecast");return o(),d("div",re,[r("div",{class:"circle",onClick:t[0]||(t[0]=u=>e.deletePlace(a.placeWeather.id))}),r("div",ne,[r("b",null,i(a.placeWeather.name),1),h(", "+i(a.placeWeather.weather[0].description),1)]),r("div",le,[r("img",{src:s.getIconUrl(a.placeWeather.weather[0].icon),alt:""},null,8,oe)]),ie,r("div",de,[r("div",ue,i(s.calcTemp(a.placeWeather.main.temp))+"\xB0",1),r("div",he,[h(" Feels Like: "+i(s.calcTemp(a.placeWeather.main.feels_like))+" \xB0C ",1),pe,h(" Pressure:"+i(a.placeWeather.main.pressure)+" hPa ",1),fe,h(" Humidity: "+i(a.placeWeather.main.humidity)+" % ",1),_e,h(" Wind: "+i(s.calcWindSpeed(a.placeWeather.wind.speed))+" km/h, "+i(s.calcWindDirection(a.placeWeather.wind.deg)),1)])]),r("div",{class:"show-forecast-btn",onClick:t[1]||(t[1]=(...u)=>s.toggleShowForecast&&s.toggleShowForecast(...u))},[r("div",{class:T(c.showForecast?"forecast-icon-minus":"forecast-icon")},null,2)]),me,k(M(n,{placeForecast:a.placeWeather.forecast},null,8,["placeForecast"]),[[L,c.showForecast]])])}var ve=v(se,[["render",ye],["__scopeId","data-v-b2cb6284"]]);const ge={name:"App",components:{PlaceCard:ve},data(){return{place:""}},computed:p({},O(["getPlaces"])),methods:y(p({},b(["fetchWeather"])),{addPlace(e){const t=document.getElementById("input-field");e.preventDefault(),t.setCustomValidity(""),this.place!==""?this.fetchWeather(this.place).catch(a=>{t.setCustomValidity(a),t.reportValidity()}).finally(()=>{t.validity.valid&&(this.place="")}):(t.setCustomValidity("enter place name"),t.reportValidity())}}),created(){this.fetchWeather("nin"),this.fetchWeather("knin")}},we={class:"container"},We=r("h1",null,"Weather App",-1);function Fe(e,t,a,l,c,s){const n=S("place-card");return o(),d("div",we,[We,r("form",null,[k(r("input",{type:"text",id:"input-field","onUpdate:modelValue":t[0]||(t[0]=u=>c.place=u)},null,512),[[B,c.place]]),r("button",{type:"submit",class:"add-btn",onClick:t[1]||(t[1]=(...u)=>s.addPlace&&s.addPlace(...u))},"Add place")]),(o(!0),d(_,null,m(e.getPlaces,u=>(o(),j(n,{placeWeather:u},null,8,["placeWeather"]))),256))])}var be=v(ge,[["render",Fe]]);const Se="https://api.openweathermap.org/data/2.5/",ke="524464013431281f7aabe3e488765d52";var P={host:Se,key:ke};const x=async(e,t)=>{try{return await(await q.get(`${P.host}${t}?q=${e}&appid=${P.key}`)).data}catch{}};var Ne=U({state:{places:[]},getters:{getPlaces:e=>e.places},actions:{async fetchWeather({commit:e},t){const a=await x(t,"weather");if(typeof a!="undefined")e("addPlace",a);else throw"no place found with given name"},async fetchForecast({commit:e},t){const a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],l=[],c=await x(t,"forecast");if(typeof c!="undefined"){for(let s=7;s<=c.list.length;s+=8){let n=new Date(c.list[s].dt_txt);c.list[s].day=a[n.getDay()],l.push(c.list[s])}e("addForecast",{placeName:t,data:l})}else throw"problem with fetching forecast"}},mutations:{addPlace(e,t){if(e.places.filter(a=>a.id==t.id).length==0)e.places.unshift(t);else throw"place already exixts"},addForecast(e,t){e.places.map(a=>a.name===t.placeName?a.forecast=t.data:a)},deletePlace(e,t){e.places=e.places.filter(a=>a.id!=t)}}});$(be).use(Ne).mount("#app");
